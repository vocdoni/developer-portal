"use strict";(self.webpackChunkdemo=self.webpackChunkdemo||[]).push([[1461],{3905:(e,t,n)=>{n.d(t,{Zo:()=>d,kt:()=>h});var o=n(67294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,o,a=function(e,t){if(null==e)return{};var n,o,a={},i=Object.keys(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var l=o.createContext({}),c=function(e){var t=o.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):r(r({},t),e)),n},d=function(e){var t=c(e.components);return o.createElement(l.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},p=o.forwardRef((function(e,t){var n=e.components,a=e.mdxType,i=e.originalType,l=e.parentName,d=s(e,["components","mdxType","originalType","parentName"]),p=c(n),h=a,m=p["".concat(l,".").concat(h)]||p[h]||u[h]||i;return n?o.createElement(m,r(r({ref:t},d),{},{components:n})):o.createElement(m,r({ref:t},d))}));function h(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var i=n.length,r=new Array(i);r[0]=p;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:a,r[1]=s;for(var c=2;c<i;c++)r[c]=n[c];return o.createElement.apply(null,r)}return o.createElement.apply(null,n)}p.displayName="MDXCreateElement"},84781:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>r,default:()=>u,frontMatter:()=>i,metadata:()=>s,toc:()=>c});var o=n(87462),a=(n(67294),n(3905));const i={sidebar_position:1,description:'1. Introduction Vo\u0109doni in Esperanto translates to "to give voice".'},r="Vocdoni introduction",s={unversionedId:"protocol/overview",id:"protocol/overview",title:"Vocdoni introduction",description:'1. Introduction Vo\u0109doni in Esperanto translates to "to give voice".',source:"@site/docs/protocol/01-overview.mdx",sourceDirName:"protocol",slug:"/protocol/overview",permalink:"/protocol/overview",draft:!1,tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1,description:'1. Introduction Vo\u0109doni in Esperanto translates to "to give voice".'},sidebar:"protocol",next:{title:"Anonymous Voting",permalink:"/protocol/Anonymous/anonymous-voting"}},l={},c=[{value:"1. Introduction",id:"1-introduction",level:2},{value:"1.1 The blockchain",id:"11-the-blockchain",level:3},{value:"1.2 Gateways",id:"12-gateways",level:3},{value:"1.3 Distributed storage",id:"13-distributed-storage",level:3},{value:"2. Process overview",id:"2-process-overview",level:2},{value:"2.1 The census",id:"21-the-census",level:3},{value:"Weighted merkle tree census",id:"weighted-merkle-tree-census",level:4},{value:"2.2 Accounts",id:"22-accounts",level:3},{value:"2.3 Elections",id:"23-elections",level:3},{value:"Election lifecycle states",id:"election-lifecycle-states",level:4},{value:"Election mode",id:"election-mode",level:4},{value:"Vote mode",id:"vote-mode",level:4},{value:"2.4 Anonymous vote",id:"24-anonymous-vote",level:3},{value:"2.5 Results",id:"25-results",level:3},{value:"2.6 Transactions and fees",id:"26-transactions-and-fees",level:3},{value:"Organization accounts",id:"organization-accounts",level:4},{value:"Election participants",id:"election-participants",level:4},{value:"Oracles",id:"oracles",level:4}],d={toc:c};function u(e){let{components:t,...n}=e;return(0,a.kt)("wrapper",(0,o.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"vocdoni-introduction"},"Vocdoni introduction"),(0,a.kt)("h2",{id:"1-introduction"},"1. Introduction"),(0,a.kt)("p",null,'Vo\u0109doni in Esperanto translates to "to give voice". We aim to achieve change by empowering society from the bottom up, building the necessary primitives and tools to enable every voice to be heard, from a few individuals to millions of citizens. We aspire to be the most accessible and functional toolset on earth, open to every group of people, regardless of their position or resources.'),(0,a.kt)("p",null,'We perceive voting as a collective signaling mechanism "to give voice", that can be fully digitalized, if provided with cryptographic guarantees about its integrity and its outcome. To this end, we have designed and implemented the Vocdoni Protocol, a universally verifiable set of rules and primitives that allow anyone to create and participate in collective decision making.'),(0,a.kt)("h3",{id:"11-the-blockchain"},"1.1 The blockchain"),(0,a.kt)("p",null,"The Vocdoni blockchain is named ",(0,a.kt)("strong",{parentName:"p"},"Vochain"),". It is a Byzantine fault-tolerant network based on ",(0,a.kt)("a",{parentName:"p",href:"https://tendermint.com/"},"Tendermint")," that executes the Vocdoni Protocol logic represented as a state machine. Its main purpose is to register votes in a decentralized and verifiable format. Currently, the network can process more than 30K votes per minute while using no more than the resources found on commodity computers."),(0,a.kt)("p",null,"The Vocdoni blockchain requires a native token (VOC) to execute management transactions (i.e creating elections), but not for casting votes. Therefore, the voters can participate in governance processes in a free and gasless manner."),(0,a.kt)("p",null,"Vochain is currently based on Proof-of-Authority consensus. However, we are already working towards transitioning to Proof-of-Stake in 2023. Until then, the tokens are free and can be obtained by anyone by using our faucet service."),(0,a.kt)("p",null,"The current vocdoni-node code can be found ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/vocdoni/vocdoni-node/tree/master/vochain"},"in our github repository"),"."),(0,a.kt)("h3",{id:"12-gateways"},"1.2 Gateways"),(0,a.kt)("p",null,"The Gateways provide entry points to our P2P network. They allow clients to reach decentralized services through a standard ",(0,a.kt)("strong",{parentName:"p"},"HTTP(s) API interface"),"."),(0,a.kt)("p",null,"Internally, the Gateways act as a standard blockchain full node, but also as indexers, meaning that they store and update a separate non state-related database that contains digested information useful for fulfilling client query requirements. For instance, ",(0,a.kt)("strong",{parentName:"p"},"Gateways compute election results")," (which are not part of the state) and provide census services (so voters can fetch their election Merkle proof). To perform the indexer function, Gateways need access to the auxiliary distributed filestore."),(0,a.kt)("h3",{id:"13-distributed-storage"},"1.3 Distributed storage"),(0,a.kt)("p",null,"Vocdoni currently relies on the ",(0,a.kt)("a",{parentName:"p",href:"https://www.ipfs.tech/"},"InterPlanetary File System (IPFS)")," for storing auxiliary information. In a voting process, this includes information such as texts (questions, descriptions, and options), complementary images, as well as census. This data does not need to be permanent in order to ensure the voting guarantees, and is expensive to keep it around, so it is published to IPFS until it can be discarded."),(0,a.kt)("p",null,"We have designed the Vocdoni primitives in a modular fashion, which allows us to incorporate more data layers in the future, such as Ethersphere Swarm, DAT, STORj or Filecoin."),(0,a.kt)("h2",{id:"2-process-overview"},"2. Process overview"),(0,a.kt)("p",null,"This section provides an overview of the Vocdoni flow for creating a participatory process, its main attributes, and configuration options."),(0,a.kt)("p",null,"The following diagram is a summary of the flow, from creating an organization account to the vote casting."),(0,a.kt)("div",{class:"inline-img-container"},(0,a.kt)("img",{class:"mx-auto",src:"/img/docs/process_overview.png",alt:"process overview schema",title:"Process Overview",style:{height:"auto",width:"100%",maxWidth:"600px",margin:"auto"}})),(0,a.kt)("p",null,"Let's explore in more detail the different concepts."),(0,a.kt)("h3",{id:"21-the-census"},"2.1 The census"),(0,a.kt)("p",null,"The census is a key component of every voting process. It defines the set of users (identified by a public key or address) who are eligible for participating in an election."),(0,a.kt)("p",null,"Vocdoni is designed to be as flexible as possible and to enable, at the very least, the most common use cases for elections. To this end, the protocol currently supports several census types and origins, and more may be added in the future."),(0,a.kt)("p",null,"The current census origins available are:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"weighted merkle tree:"),' for standard elections, allowing participants to vote with different "weights" (e.g. someone with 50 points might have 50 votes)'),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"indexed merkle tree:")," an optimized merkle tree for voting on zkSnarks"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"credential service provider (CSP):")," for elections where an authority provides voting credentials (such as OAUTH, mailing, SMS, etc.)"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"ERC20 based on storage proofs:")," for Ethereum based tokens, the user needs to fetch an EIP1186 proof from a web3 provider (implemented as part of ",(0,a.kt)("a",{parentName:"li",href:"https://voice.aragon.org"},"https://voice.aragon.org"),")")),(0,a.kt)("p",null,"The current implementation of our Vocdoni API/SDK only provides the weighted merkle tree, so we will focus on this specific origin. More options will become available in the following months."),(0,a.kt)("h4",{id:"weighted-merkle-tree-census"},"Weighted merkle tree census"),(0,a.kt)("p",null,"The census itself is represented as a binary ",(0,a.kt)("a",{parentName:"p",href:"https://en.wikipedia.org/wiki/Merkle_tree"},"Merkle Tree"),", where the keys of the tree contain the (hashed) public keys or addresses of all eligible voters and the leafs (values) represent the voting weight."),(0,a.kt)("mermaid",{value:"graph TD;\nstyle Root fill:#EBAE9A,stroke:#333,stroke-width:2px\n\nRoot--\x3eH1\nRoot--\x3eH2\nH1--\x3eH3\nH1--\x3eH4\nH2--\x3eH5\nH2--\x3eH6\nH3-.->WeightParticipant1\nH4-.->Empty\nH5-.->WeightParticipant2\nH6-.->WeightParticipant3"}),(0,a.kt)("p",null,"Using Merkle Trees, we can efficiently prove that a key/value belongs to the tree. For a tree of size ",(0,a.kt)("inlineCode",{parentName:"p"},"N")," elements, only ",(0,a.kt)("inlineCode",{parentName:"p"},"log(N)")," elements are needed to generate a proof. A tree with 1 million leaves, for example, would only need 20 hashes to prove the inclusion of any one leaf. "),(0,a.kt)("p",null,"A ",(0,a.kt)("strong",{parentName:"p"},"prover")," is able to prove the inclusion of any leaf of the Merkle Tree to a ",(0,a.kt)("strong",{parentName:"p"},"verifier"),":"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"The ",(0,a.kt)("strong",{parentName:"li"},"verifier")," only needs to know the Root Hash"),(0,a.kt)("li",{parentName:"ul"},"The ",(0,a.kt)("strong",{parentName:"li"},"prover")," only needs to provide the Leaf and its Sibling, as well as the siblings of each of its ancestors (hence, ",(0,a.kt)("inlineCode",{parentName:"li"},"log(N)")," elements).")),(0,a.kt)("h3",{id:"22-accounts"},"2.2 Accounts"),(0,a.kt)("p",null,"A Vocdoni account is identified by an Ethereum-like address. This allows us to use standard Web3 signers such as Metamask."),(0,a.kt)("p",null,"An account can:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Create and manage elections"),(0,a.kt)("li",{parentName:"ul"},"Transfer tokens"),(0,a.kt)("li",{parentName:"ul"},"Authorize other accounts to act on his behalf (delegates)"),(0,a.kt)("li",{parentName:"ul"},"Manage its metadata")),(0,a.kt)("p",null,"For creating an account, a faucet package is required, since bootstrapping requires a fee in Voc tokens. At the moment, Vocdoni provides a free faucet service for distributing such tokens (integrated within the client SDK)."),(0,a.kt)("p",null,"An account often represents an organization and might have associated an ",(0,a.kt)("inlineCode",{parentName:"p"},"infoURL")," pointing to an external IPFS file containing the metadata details (name, description, logo, etc.). All Vochain nodes automatically distribute and store this data.\xa0"),(0,a.kt)("h3",{id:"23-elections"},"2.3 Elections"),(0,a.kt)("p",null,"An Election (named a ",(0,a.kt)("inlineCode",{parentName:"p"},"process")," internally) is a rule-set of options and requirements written into the blockchain state, thus guaranteeing that they can no longer be modified (unless explicitly configured to be upgradeable). The election is created and configured by an account owner or account delegates."),(0,a.kt)("p",null,"The following election options can be configured:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"Census origin:")," description of the eligible voters or rules."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"Lifecycle:")," initial state, start, and end blocks."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"Election mode:")," how should the process behave."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"Vote mode:")," the kind of ballots expected from voters."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"Tally mode:")," how should the results be computed as defined by the Vocdoni Ballot protocol. Details and examples can be found ",(0,a.kt)("a",{parentName:"li",href:"https://blog.aragon.org/vocdoni-ballot-protocol"},"here"),".")),(0,a.kt)("h4",{id:"election-lifecycle-states"},"Election lifecycle states"),(0,a.kt)("p",null,"An election must be in one of the following states:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"Ready:")," the process is open to voters."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"Paused:")," the process is active, but votes are not accepted."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"Ended:")," the process is finished and the state can no longer be updated."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"Canceled:")," the process is terminated by the election official and is no longer considered valid."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"Result:")," the process has ended and results have been published.")),(0,a.kt)("p",null,"The states can transition in the following ways:"),(0,a.kt)("mermaid",{value:"flowchart LR\nstyle Creation fill:#EBAE9A,stroke:#333,stroke-width:2px\n\nCreation -.-> Ready\nCreation-.->Paused\nReady <--\x3e Paused\nReady--\x3eEnded\nReady--\x3eCanceled\nEnded--\x3eResults"}),(0,a.kt)("h4",{id:"election-mode"},"Election mode"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"Auto-start:")," Enables the voting process to be started manually by the election administrator, as opposed to setting a start date."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"Interruptible:")," The election administrator may pause or end the process at any point in time."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"Encrypted metadata:")," Allows the questions and options of a process to be encrypted, so an external observer won't be able to see the questions unless they have the key."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"Dynamic census:")," By default, the census is immutable and  cannot be changed once published. However, long lasting polls may enable a dynamic census so that new members of a community may vote on a process after joining. "),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"Allow override:")," If enabled, a voter may vote multiple times and replace any prior vote envelope. This protects voters from coercion and accidental mistakes.")),(0,a.kt)("h4",{id:"vote-mode"},"Vote mode"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"Anonymous:")," If enabled, the voter\u2019s public key will remain unrecoverable. Instead, the voter will prove that they are registered to vote by computing a zk-SNARK proof (ZKP) on their device. If this option is not chosen, the vote envelope will contain a signed vote, resulting in a pseudonymous vote. If an observer correlates the voter\u2019s public key with personal data, the voter could be identified."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"Encrypted:")," If enabled, the payload of the votes emitted will remain encrypted until the end of the process. The results will be available once the encryption keys are published by the miners at the end of the process. If disabled, the results can be seen in real time."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"CostFromWeight:")," If enabled, the total cost defined in the ballot protocol will equal the voter's census weight.")),(0,a.kt)("h3",{id:"24-anonymous-vote"},"2.4 Anonymous vote"),(0,a.kt)("p",null,"A voting envelope is composed of two parts: the census proof (which defines the eligibility of the voter) and the ballot (the actual contents of the vote, containing the chosen options). The anonymization of the voting envelope is achieved by anonymizing the census proof using zk-SNARKs technology."),(0,a.kt)("p",null,"zk-SNARK proofs are a convenient method to prove something to a third-party verifier without revealing the contents of what is being proven."),(0,a.kt)("p",null,"The goal of the Vocdoni zk-SNARK circuit is to prove that a voter (identified by a public key) is part of a Census (a Merkle Tree composed of such public keys) without revealing the identity (public key) of that voter. This circuit produces a unique and deterministic identifier (nullifier) that can be processed by a public ledger/blockchain to distinguish whether the voter has previously submitted a vote."),(0,a.kt)("p",null,(0,a.kt)("em",{parentName:"p"},"Note: while zk-SNARK voting is enabled in the protocol and available at ",(0,a.kt)("a",{parentName:"em",href:"https://vocdoni.app"},"https://vocdoni.app"),", it is not yet implemented as part of the current SDK.")),(0,a.kt)("h3",{id:"25-results"},"2.5 Results"),(0,a.kt)("p",null,"The results are computed by a set of rules configured by the election owner and following the ",(0,a.kt)("a",{parentName:"p",href:"https://blog.aragon.org/vocdoni-ballot-protocol"},"Vocdoni ballot protocol"),", which allows for almost any type of voting such as Range or Quadratic."),(0,a.kt)("p",null,"Results are represented as a matrix of numbers such as ",(0,a.kt)("inlineCode",{parentName:"p"},"[ [1,2], [0,1] ]")," which can be interpreted as:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"for the first question, the first option received 1 vote and the second option 2 votes"),(0,a.kt)("li",{parentName:"ul"},"for the second question, the first option received 0 votes and the second option 1 vote")),(0,a.kt)("p",null,"Currently, the results computation is not part of the blockchain state logic, due to its potential resources cost (especially for large elections). To mitigate this issue, we introduced a special set of nodes called ",(0,a.kt)("inlineCode",{parentName:"p"},"Oracles")," that are responsible for computing the results offchain and sending the digested results via an on-chain transaction."),(0,a.kt)("p",null,"The Gateway nodes will also compute the results locally, so the end user can either trust the Gateway to which they are connected or use the list of Oracles. "),(0,a.kt)("p",null,"Verifiability is guaranteed, since every end user may fetch the list of votes of an election from the blockchain state and reproduce the tally locally."),(0,a.kt)("h3",{id:"26-transactions-and-fees"},"2.6 Transactions and fees"),(0,a.kt)("p",null,"Vochain transactions are protobuf encoded and signed by the sender. However, the SDK handles this operation transparently for the end user."),(0,a.kt)("p",null,"Transactions may have a fee that the sender needs to cover from its own balance. The fee cost per transaction is currently fixed and configured in the blockchain genesis file. At the moment, once a transaction is executed, the fee is automatically burned. This is an intermediate solution that will become invalid once the full features of the Voc tokenomics chain are implemented."),(0,a.kt)("p",null,"The following list shows the transactions:"),(0,a.kt)("h4",{id:"organization-accounts"},"Organization accounts"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"CreateAccount"),(0,a.kt)("li",{parentName:"ul"},"SendTokens"),(0,a.kt)("li",{parentName:"ul"},"CollectFaucet"),(0,a.kt)("li",{parentName:"ul"},"NewProcess"),(0,a.kt)("li",{parentName:"ul"},"SetProcessStatus"),(0,a.kt)("li",{parentName:"ul"},"SetAccountInfoURI"),(0,a.kt)("li",{parentName:"ul"},"SetProcessCensus"),(0,a.kt)("li",{parentName:"ul"},"SetProcessQuestionIndex"),(0,a.kt)("li",{parentName:"ul"},"AddDelegateForAccount"),(0,a.kt)("li",{parentName:"ul"},"DelDelegateForAccount")),(0,a.kt)("h4",{id:"election-participants"},"Election participants"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Vote")),(0,a.kt)("h4",{id:"oracles"},"Oracles"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"RegisterKey"),(0,a.kt)("li",{parentName:"ul"},"SetProcessResults")),(0,a.kt)("h1",{id:"more-information"},"More information"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"https://law.mit.edu/pub/remotevotingintheageofcryptography/release/1"},"paper (not yet published) about Vocdoni")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"https://docs.vocdoni.io"},"oficial vocdoni docs (outdated)")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"https://blog.vocdoni.io"},"vocdoni blog"))))}u.isMDXComponent=!0}}]);