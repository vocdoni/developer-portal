"use strict";(self.webpackChunkdemo=self.webpackChunkdemo||[]).push([[8901],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>m});var o=n(67294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n,o,r={},i=Object.keys(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var c=o.createContext({}),s=function(e){var t=o.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):a(a({},t),e)),n},p=function(e){var t=s(e.components);return o.createElement(c.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},u=o.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,c=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),u=s(n),m=r,v=u["".concat(c,".").concat(m)]||u[m]||d[m]||i;return n?o.createElement(v,a(a({ref:t},p),{},{components:n})):o.createElement(v,a({ref:t},p))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,a=new Array(i);a[0]=u;var l={};for(var c in t)hasOwnProperty.call(t,c)&&(l[c]=t[c]);l.originalType=e,l.mdxType="string"==typeof e?e:r,a[1]=l;for(var s=2;s<i;s++)a[s]=n[s];return o.createElement.apply(null,a)}return o.createElement.apply(null,n)}u.displayName="MDXCreateElement"},23173:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>a,default:()=>d,frontMatter:()=>i,metadata:()=>l,toc:()=>s});var o=n(87462),r=(n(67294),n(3905));const i={},a="React Providers",l={unversionedId:"ui-components/react-providers",id:"ui-components/react-providers",title:"React Providers",description:"In order for the @vocdoni/chakra-components components to be functional, they need to be wrapped with react context and providers from @vocdoni/react-providers. The react providers are the link between the Vocdoni Protocol and the UI Components, using the Vocdoni SDK to perform all the necessary tasks involved to fetch data and vote in elections.",source:"@site/docs/ui-components/react-providers.md",sourceDirName:"ui-components",slug:"/ui-components/react-providers",permalink:"/ui-components/react-providers",draft:!1,tags:[],version:"current",frontMatter:{},sidebar:"defaultSidebar",previous:{title:"Organization Components",permalink:"/ui-components/organization"},next:{title:"Vocdoni Protocol",permalink:"/protocol/"}},c={},s=[{value:"Usage",id:"usage",level:2},{value:"ClientProvider",id:"clientprovider",level:3},{value:"ElectionProvider",id:"electionprovider",level:3},{value:"OrganizationProvider",id:"organizationprovider",level:3},{value:"Hooks",id:"hooks",level:3}],p={toc:s};function d(e){let{components:t,...n}=e;return(0,r.kt)("wrapper",(0,o.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"react-providers"},"React Providers"),(0,r.kt)("p",null,"In order for the ",(0,r.kt)("inlineCode",{parentName:"p"},"@vocdoni/chakra-components")," components to be functional, they need to be wrapped with react context and providers from ",(0,r.kt)("inlineCode",{parentName:"p"},"@vocdoni/react-providers"),". The react providers are the link between the Vocdoni Protocol and the UI Components, using the Vocdoni SDK to perform all the necessary tasks involved to fetch data and vote in elections. "),(0,r.kt)("p",null,"React-providers can also be used as a standalone package, allowing you to create custom react components without interacting directly with the Vocdoni SDK. "),(0,r.kt)("h2",{id:"usage"},"Usage"),(0,r.kt)("p",null,"First, add the react-providers package to your project:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"yarn add @vocdoni/react-providers\n")),(0,r.kt)("p",null,"The following providers are available:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"ClientProvider"),(0,r.kt)("li",{parentName:"ul"},"ElectionProvider"),(0,r.kt)("li",{parentName:"ul"},"OrganizationProvider")),(0,r.kt)("h3",{id:"clientprovider"},"ClientProvider"),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"ClientProvider")," is a necessary wrapper for any application that uses election or organization components, as it provides the ability to make network requests and sign cryptographic packages. ",(0,r.kt)("inlineCode",{parentName:"p"},"ClientProvider")," is a dependency of the other providers."),(0,r.kt)("p",null,"The very first step is to add the ",(0,r.kt)("inlineCode",{parentName:"p"},"<ClientProvider />")," as a wrapper of your\napplication or, at least, of your election:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx"},"import { ClientProvider } from '@vocdoni/react-providers'\n\nconst App = () => {\n  const signer = /* any ethers based signer */\n  return (\n    <ClientProvider env='stg' signer={signer}>\n      {/* your actual app code */}\n    </ClientProvider>\n  )\n}\n")),(0,r.kt)("p",null,"The signer must be a valid cryptographic wallet. It is used to sign requests to the Vocodni network. If the client represents an organization, this wallet address will be the organization ID. If voting, this wallet is used as the voter's private key. ",(0,r.kt)("inlineCode",{parentName:"p"},"env")," can be any of the ","[Vocdoni Environments][sdk environments]",", either in string format or using the SDK ",(0,r.kt)("inlineCode",{parentName:"p"},"EnvOptions")," enum."),(0,r.kt)("h3",{id:"electionprovider"},"ElectionProvider"),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"ElectionProvider")," allows you to interact with published elections and execute actions like voting.\nYou can use it as a wrapper of your election components:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx"},"import { ElectionProvider } from '@vocdoni/react-providers'\n\nconst MyElection = () => {\n  return (\n    <ElectionProvider id='election-uuid'>\n      {/* your actual election code */}\n    </ElectionProvider>\n  )\n}\n")),(0,r.kt)("p",null,"If you specify an election ID, the provider will fetch the election for you. You can alternatively directly pass an ",(0,r.kt)("inlineCode",{parentName:"p"},"election")," object to the ",(0,r.kt)("inlineCode",{parentName:"p"},"ElectionProvider")," constructor. This is useful if you want to render a list of elections whose data you already have:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx"},"import { ElectionProvider } from '@vocdoni/react-providers'\n\nconst MyElectionList = () => {\n  const elections = /* your elections list */\n  return (\n    elections.map((election)=> (\n      <ElectionProvider election={election}>\n        <MyElectionListItem />\n      </ElectionProvider>\n    ))\n  )\n}\n")),(0,r.kt)("p",null,"Once you have initialized the provider, you can use the ",(0,r.kt)("inlineCode",{parentName:"p"},"useElection")," hook to interact with the election:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx"},"import { useElection } from '@vocdoni/react-providers'\n\nconst MyElectionListItem = () => {\n  const { election } = useElection()\n\n  return <h1>{election.title.default}</h1>\n}\n")),(0,r.kt)("h3",{id:"organizationprovider"},"OrganizationProvider"),(0,r.kt)("p",null,"This provider is similar to the ElectionProvider` but gives you the ability to represent and interact with organizations."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx"},"import { OrganizationProvider } from '@vocdoni/react-providers'\n\nconst MyElection = () => {\n  return (\n    <OrganizationProvider id='organization-uuid'>\n      {/* your actual organization code */}\n    </OrganizationProvider>\n  )\n}\n")),(0,r.kt)("h3",{id:"hooks"},"Hooks"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"useClient")," allows you to interact with the ",(0,r.kt)("inlineCode",{parentName:"li"},"ClientProvider")," layer. All the\nmethods it exports allow you to use the client while interacting with the\ncontext/state:",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"fetchAccount"),": fetches connected account information (and balance)"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"createAccount"),": creates a new account using the connected signer"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"setClient"),": allows you to change the client during runtime"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"localize"),": internal method used for localization"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"setSigner"),": allows you to change the signer during runtime"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"generateSigner"),": allows you to ",(0,r.kt)("em",{parentName:"li"},"generate")," a signer"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"useElection")," allows you to interact with the ",(0,r.kt)("inlineCode",{parentName:"li"},"ElectionProvider")," layer. As per\nthe ",(0,r.kt)("inlineCode",{parentName:"li"},"useClient")," methods, anything exported here updates with the context:",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"fetchElection")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"setClient"),": allows you to change the client at election layer level\n(used by flows like the spreadsheet/csv login one)"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"vote"),": A helper method to vote, using the current context info."))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"useOrganization"),":",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"fetch"),": fetches the organization data"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"update"),": update the organization (only for organization owners)")))))}d.isMDXComponent=!0}}]);