"use strict";(self.webpackChunkdemo=self.webpackChunkdemo||[]).push([[8882],{3905:(e,t,n)=>{n.d(t,{Zo:()=>u,kt:()=>m});var o=n(67294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,o,a=function(e,t){if(null==e)return{};var n,o,a={},i=Object.keys(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var c=o.createContext({}),l=function(e){var t=o.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):r(r({},t),e)),n},u=function(e){var t=l(e.components);return o.createElement(c.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},p=o.forwardRef((function(e,t){var n=e.components,a=e.mdxType,i=e.originalType,c=e.parentName,u=s(e,["components","mdxType","originalType","parentName"]),p=l(n),m=a,h=p["".concat(c,".").concat(m)]||p[m]||d[m]||i;return n?o.createElement(h,r(r({ref:t},u),{},{components:n})):o.createElement(h,r({ref:t},u))}));function m(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var i=n.length,r=new Array(i);r[0]=p;var s={};for(var c in t)hasOwnProperty.call(t,c)&&(s[c]=t[c]);s.originalType=e,s.mdxType="string"==typeof e?e:a,r[1]=s;for(var l=2;l<i;l++)r[l]=n[l];return o.createElement.apply(null,r)}return o.createElement.apply(null,n)}p.displayName="MDXCreateElement"},65124:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>r,default:()=>d,frontMatter:()=>i,metadata:()=>s,toc:()=>l});var o=n(87462),a=(n(67294),n(3905));const i={},r="Vocdoni Tokens",s={unversionedId:"sdk/integration-details/vocdoni-tokens",id:"sdk/integration-details/vocdoni-tokens",title:"Vocdoni Tokens",description:'Behind-the-scenes, Vocdoni is powered by a custom blockchain. This component provides universal verifiability, but it also introduces some complexity. In order to distribute workload and verify transactions, our blockchain uses a digital "currency" of Vocdoni tokens that have no real-world value but help with spam reduction and self-sustainability. Actions that update data on the blockchain, such as creating an election, incur a "cost." Integrators are responsible for ensuring that accounts creating elections have a sufficient balance of tokens.',source:"@site/docs/sdk/integration-details/vocdoni-tokens.md",sourceDirName:"sdk/integration-details",slug:"/sdk/integration-details/vocdoni-tokens",permalink:"/sdk/integration-details/vocdoni-tokens",draft:!1,tags:[],version:"current",frontMatter:{},sidebar:"defaultSidebar",previous:{title:"Complex Census",permalink:"/sdk/integration-details/census-types/on-chain/complex-census"},next:{title:"Voting Types",permalink:"/sdk/integration-details/voting-types/"}},c={},l=[{value:"Initial Tokens",id:"initial-tokens",level:2},{value:"Checking Token Balance",id:"checking-token-balance",level:2},{value:"Election Cost",id:"election-cost",level:3},{value:"Requesting Tokens: The Faucet",id:"requesting-tokens-the-faucet",level:2},{value:"DEV &amp; STG",id:"dev--stg",level:3},{value:"PROD",id:"prod",level:3}],u={toc:l};function d(e){let{components:t,...n}=e;return(0,a.kt)("wrapper",(0,o.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"vocdoni-tokens"},"Vocdoni Tokens"),(0,a.kt)("p",null,"Behind-the-scenes, Vocdoni is powered by a custom ",(0,a.kt)("a",{parentName:"p",href:"/protocol#11-the-blockchain"},"blockchain"),'. This component provides universal verifiability, but it also introduces some complexity. In order to distribute workload and verify transactions, our blockchain uses a digital "currency" of Vocdoni tokens that have no real-world value but help with spam reduction and self-sustainability. Actions that update data on the blockchain, such as creating an election, incur a "cost." Integrators are responsible for ensuring that accounts creating elections have a sufficient balance of tokens.'),(0,a.kt)("admonition",{type:"info"},(0,a.kt)("p",{parentName:"admonition"},"Casting a vote ",(0,a.kt)("strong",{parentName:"p"},(0,a.kt)("em",{parentName:"strong"},"never"))," requires Vocdoni tokens.")),(0,a.kt)("h2",{id:"initial-tokens"},"Initial Tokens"),(0,a.kt)("p",null,"Because accounts cannot hold Vocdoni tokens before they are created, ",(0,a.kt)("a",{parentName:"p",href:"/sdk/reference/classes/VocdoniSDKClient#createaccount"},(0,a.kt)("inlineCode",{parentName:"a"},"client.createAccount()"))," automatically requests tokens from the blockchain. In ",(0,a.kt)("strong",{parentName:"p"},"production environments"),", only enough tokens to create the account itself are provided. Moving forward, more tokens must be requested in order to create elections.\nIn ",(0,a.kt)("strong",{parentName:"p"},"non-production environments"),", a large amount of tokens is automatically supplied to accounts when they are created. You can create many elections in the ",(0,a.kt)("inlineCode",{parentName:"p"},"STG")," and ",(0,a.kt)("inlineCode",{parentName:"p"},"DEV")," environments before worrying about maintaining a balance."),(0,a.kt)("h2",{id:"checking-token-balance"},"Checking Token Balance"),(0,a.kt)("p",null,"From this point on, you can check your account balance with ",(0,a.kt)("a",{parentName:"p",href:"/sdk/reference/classes/VocdoniSDKClient#createaccount"},(0,a.kt)("inlineCode",{parentName:"a"},"client.createAccount()"))," or ",(0,a.kt)("a",{parentName:"p",href:"/sdk/reference/classes/VocdoniSDKClient#fetchaccount"},(0,a.kt)("inlineCode",{parentName:"a"},"client.fetchAccountInfo()")),". This provides all the information associated with the account, including the balance."),(0,a.kt)("h3",{id:"election-cost"},"Election Cost"),(0,a.kt)("p",null,"The token cost of a voting process is not constant; it is determined by many factors. After creating an election, but before publishing it to the blockchain, you should get a sense of the cost of the operation in order to ensure your account has sufficient balance. There are two methods to do this: ",(0,a.kt)("a",{parentName:"p",href:"/sdk/reference/classes/VocdoniSDKClient#estimateelectioncost"},(0,a.kt)("inlineCode",{parentName:"a"},"client.estimateElectionCost()"))," quickly provides a decent estimate of the cost and can be useful for writing UI components. ",(0,a.kt)("a",{parentName:"p",href:"/sdk/reference/classes/VocdoniSDKClient#calculateelectioncost"},(0,a.kt)("inlineCode",{parentName:"a"},"client.calculateElectionCost()"))," makes a time-intensive API call but provides an exact figure. It is helpful to use this directly before publishing the election to ensure it can be published."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-ts"},"const price = await client.estimateElectionCost(election); // Should be an UnpublishedElection with a maxCensusSize\nconsole.log(price); // shows the estimated price\n")),(0,a.kt)("admonition",{title:"estimate election cost",type:"note"},(0,a.kt)("p",{parentName:"admonition"},"In order to estimate the cost of an election quickly, the election must be created with a specified ",(0,a.kt)("a",{parentName:"p",href:"/sdk/reference/interfaces/IElectionParameters#maxcensussize"},(0,a.kt)("inlineCode",{parentName:"a"},"maxCensusSize")),". This restricts the number of users who can enter the census but enables quick election cost estimation. If you want an unlimited census size, just use ",(0,a.kt)("inlineCode",{parentName:"p"},"calculateElectionCost")," instead.")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-ts"},"const electionCost = await client.calculateElectionCost(election);\nconst info = await client.createAccount();\nif (info.balance < electionCost) {\n  console.log('Need to request more tokens');\n}\n")),(0,a.kt)("h2",{id:"requesting-tokens-the-faucet"},"Requesting Tokens: The Faucet"),(0,a.kt)("p",null,"The main way for users to gain tokens in a production environment is via a faucet, a free provider of tokens. A faucet enables users to generate a ",(0,a.kt)("inlineCode",{parentName:"p"},"faucetPackage"),". This package is essentially a set of instructions; it must still be sent to the blockchain in order to request the actual tokens."),(0,a.kt)("admonition",{title:"users & tokens",type:"tip"},(0,a.kt)("p",{parentName:"admonition"},"Some systems require election administrators to request tokens manually for their elections. In other systems, integrators may handle token requests automatically on behalf of their users. This can be done manually or with a custom faucet implementation. ",(0,a.kt)("a",{parentName:"p",href:"https://chat.vocdoni.io"},"Reach out")," for help with this.")),(0,a.kt)("h3",{id:"dev--stg"},"DEV & STG"),(0,a.kt)("p",null,"In development and staging environments, the faucet functionality is handled automatically. Behind-the-scenes, ",(0,a.kt)("inlineCode",{parentName:"p"},"createAccount")," requests a large amount of tokens from a development faucet. These tokens should last a while, but once the account balance is low, more tokens must be requested. This can be done with "),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-ts"},"await client.collectFaucetTokens();\n")),(0,a.kt)("p",null,"This method uses the default development faucet to generate a ",(0,a.kt)("inlineCode",{parentName:"p"},"faucetPackage")," requesting new tokens. It can be used any number of times. In development environments, this is all that needs to be done! "),(0,a.kt)("h3",{id:"prod"},"PROD"),(0,a.kt)("p",null,"Production environments require more hands-on generation of a ",(0,a.kt)("inlineCode",{parentName:"p"},"faucetPackage"),". First you need to identify the ",(0,a.kt)("strong",{parentName:"p"},"account address")," you are requesting tokens for. "),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-ts"},"console.log((await client.fetchAccountInfo()).address);\n")),(0,a.kt)("p",null,"There are multiple ways to request a faucet package:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Use ",(0,a.kt)("a",{parentName:"li",href:"https://app.vocdoni.io/faucet"},"https://app.vocdoni.io/faucet"),", our web-based faucet that requires users to login with some form of existing account (google, github, social media). It provides a large amount of tokens to the given address but limits the number of times a single user can request tokens per week."),(0,a.kt)("li",{parentName:"ul"},"Reach out via ",(0,a.kt)("a",{parentName:"li",href:"https://chat.vocdoni.io"},"discord")," to request tokens sent to your account address. "),(0,a.kt)("li",{parentName:"ul"},"If you are an integrator who needs to manage your own faucet to provide tokens to users automatically, ask us for help with creating a custom faucet.")),(0,a.kt)("p",null,"All of these faucets should provide you with a base-64 string containing the necessary information to request tokens from the blockchain with ",(0,a.kt)("inlineCode",{parentName:"p"},"collectFaucetTokens"),". Note that each faucet package can only be used once."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-ts"},'await client.collectFaucetTokens("<b64string>")\n')),(0,a.kt)("admonition",{title:"collect faucet tokens",type:"note"},(0,a.kt)("p",{parentName:"admonition"},"In production environments, the ",(0,a.kt)("inlineCode",{parentName:"p"},"collectFaucetTokens")," method requires a ",(0,a.kt)("inlineCode",{parentName:"p"},"faucetPackage")," to be provided. In development and stage, this is optional as a package is generated automatically by default.")))}d.isMDXComponent=!0}}]);